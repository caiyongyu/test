<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //序列化：二叉树转为字符串存储
        //DFS递归

        const serialize = (root) => {
            if (root == null) { // 遇到null节点，“翻译”成X
                return 'X,';
            }
            const leftSerialized = serialize(root.left);   // 左子树的序列化的字符串
            const rightSerialized = serialize(root.right); // 右子树的序列化的字符串
            return root.val + ',' + leftSerialized + rightSerialized; // 按 根|左|右 顺序拼接
        };


        //2 反序列化
        const deserialize = (data) => {
            const list = data.split(',');

            const buildTree = (list) => {
                const rootVal = list.shift(); // 获取节点对应的“数据”
                if (rootVal == "X") {         // 是X，就返回null节点
                return null;
                }
                const root = new TreeNode(rootVal); // 不是X，则创建节点
                root.left = buildTree(list);        // 构建左子树
                root.right = buildTree(list);       // 构建右子树
                return root;                        // 返回当前构建好的子树
            };

            return buildTree(list); // 构建的入口
        };

    </script>
</body>
</html>